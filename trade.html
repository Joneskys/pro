<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Trade Calculator</title>
<meta name="viewport" content="width=device-width">
<style>
body{background:#050b1a;color:#eaf2ff;font-family:system-ui;display:flex;align-items:center;justify-content:center;height:100vh}
.box{background:#071631;padding:30px;border-radius:20px;width:380px;box-shadow:0 0 60px #000}
input{width:100%;padding:10px;margin:6px 0;background:#0c1c3a;border:1px solid #203a6d;color:white;border-radius:12px}
button{padding:10px;width:100%;margin-top:10px;background:#133061;color:white;border:0;border-radius:12px}
.ratio{font-size:28px;font-weight:bold}
.green{color:#00e676}
.red{color:#ff5252}
</style>
</head>
<body>
<div class="box">
<h2 id="stock"></h2>

<label>Buy</label><input id="entry">
<label>SL Sell</label><input id="sl">
<label>Target Sell</label><input id="tgt">

<label>Quantity</label><input id="qty" oninput="syncBudget()">
<label>Budget</label><input id="budget" oninput="syncQty()">

<button onclick="calc()">Calculate</button>

<div id="out"></div>
</div>

<script>
const q=new URLSearchParams(location.search);
stock.innerText=q.get("stock");
entry.value=q.get("entry");
sl.value=q.get("sl");
tgt.value=q.get("target");

const r2=x=>Math.round(x*20)/20;

function syncQty(){
 if(!budget.value||!entry.value)return;
 qty.value=Math.floor(budget.value/entry.value);
}
function syncBudget(){
 if(!qty.value||!entry.value)return;
 budget.value=Math.round(qty.value*entry.value);
}

function calc(){
 let e=+entry.value,slv=+sl.value,tv=+tgt.value,q=+qty.value;
 let loss=(slv-e)*q;
 let profit=(tv-e)*q;
 let rr=(profit/Math.abs(loss)).toFixed(2);

 out.innerHTML=`
 <p class="red">SL Hit P/L: ₹${loss.toFixed(2)}</p>
 <p class="green">Target Hit P/L: ₹${profit.toFixed(2)}</p>
 <div class="ratio ${profit>Math.abs(loss)?'green':'red'}">R:R ${rr}</div>`;
}
</script>
</body>
</html>
